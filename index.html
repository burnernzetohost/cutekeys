<!DOCTYPE html>
<html>
<head>
<title>LIVE KEYS</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  background-color: #1B1C1D;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  min-height: 100vh; /* Use min-height to ensure body fills screen */
  margin: 0;
  font-family: sans-serif;
  padding-top: 50px;
  box-sizing: border-box; /* Include padding in height/width calculation */
}

h1 {
  color: #0000FF;
  font-size: 50px;
  margin: 0;
}

.rectangle {
  width: 1000px;
  max-width: 95%; /* Add max-width for responsiveness */
  height: 500px;
  background-color: transparent;
  border: 3px solid white;
  border-radius: 25px;
  margin-top: 20px;
  padding: 15px;
  overflow-y: auto;
  box-sizing: border-box;
}

/* Styles for the messages that will be added */
.rectangle p {
    color: white;
    margin: 5px 0;
    font-size: 16px;
    word-wrap: break-word;
}

/* Media query for mobile devices */
@media (max-width: 768px) {
  body {
    padding-top: 20px;
  }

  h1 {
    font-size: 36px; /* Reduce font size for smaller screens */
  }

  .rectangle {
    width: 95%; /* Make width fluid */
    height: 65vh; /* Adjust height relative to the viewport */
    padding: 10px;
  }
}
</style>
</head>
<body>

<h1>LIVE KEYS</h1>
<div id="message-box" class="rectangle"></div>

<script>
    const messageBox = document.getElementById('message-box');
    const ws = new WebSocket(`wss://NZE77-keys.hf.space/ws`);

    // This variable will keep track of the current <p> element we are typing in.
    let currentLineElement = null;

    ws.onmessage = function(event) {
        const char = event.data;

        // If we receive the [ENTER] signal, we'll start a new line.
        if (char === '[ENTER]') {
            currentLineElement = null; // Reset to start a new paragraph on the next key
            return; // We're done, no need to type "[ENTER]"
        }

        // If there is no current line, create a new <p> element.
        if (currentLineElement === null) {
            currentLineElement = document.createElement('p');
            messageBox.prepend(currentLineElement); // Add it to the top of the box
        }

        // Append the received character to the current line.
        currentLineElement.textContent += char;
    };

    // Optional: Log connection status to the console for debugging.
    ws.onopen = function() {
        console.log("WebSocket connection established.");
    };

    ws.onclose = function() {
        console.log("WebSocket connection closed.");
    };

    ws.onerror = function(error) {
        console.error("WebSocket Error: ", error);
    };
</script>

</body>
</html>
